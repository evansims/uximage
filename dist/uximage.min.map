{"version":3,"file":"uximage.min.js","sources":["uximage.js"],"names":["__bind","fn","me","apply","arguments","window","UXImage","options","this","Setup","onInputEvent","getBrowserState","Loop","Transform","transformSource","setSource","breakpointProcessor","breakpointApply","scrollProcessor","getElementOffsets","Analyze","Parse","checkWebP","speedTestComplete","speedTest","len","o","speedTestUri","lazyLoadDistance","_ready","_deviceBandwidth","_clientWebPSupport","_cachedBreakpointObjects","_cachedLazyObjects","_inputEventCache","inputTicking","viewportScrollTimer","viewportResizeTimer","lastKnownScrollX","lastKnownScrollY","lastKnownHeight","lastKnownWidth","length","document","readyState","addEventListener","_this","prototype","callback","e","testImage","testStart","Image","onload","bandwidth","connectionKbps","duration","Date","getTime","onerror","onabort","src","Math","random","setTimeout","_error","result","webP","height","width","container","i","images","body","getElementsByClassName","element","classes","ondemand","classList","className","split","indexOf","setAttribute","push","obj","poX","poY","pos","getBoundingClientRect","x","left","y","top","image","imagePosition","qHide","qShow","retry","transformSourceCallback","getAttribute","offsetHeight","style","backgroundImage","removeAttribute","clearTimeout","force","high","low","parseInt","acceptSourceChange","curr","substring","lastIndexOf","sources","medium","dimensions","ratio","testSource","tagName","paddingBottom","createElement","appendChild","display","visibility","offsetWidth","parentNode","removeChild","eventType","innerHeight","documentElement","clientHeight","innerWidth","clientWidth","pageXOffset","scrollLeft","pageYOffset","scrollTop","requestAnimationFrame","css","head","getElementsByTagName","innerHTML","join","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","define","call"],"mappings":"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"}